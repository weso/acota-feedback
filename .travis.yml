language: java

jdk:
  - openjdk6
  - openjdk7
  - oraclejdk7

before_script:
  - 'wget http://156.35.82.101:7000/downloads/acota/utils/travis/feedback/acota.properties'
  - 'wget http://156.35.82.101:7000/downloads/acota/utils/travis/sql/acota.mysql.sql'
  - 'wget http://156.35.82.101:7000/downloads/acota/utils/travis/sql/acota.postgresql.sql'
  - mysql --user="root" --password="" -e 'SET GLOBAL time_zone = "+00:00";'
  - mysql --user="root" --password="" -e 'create database acota;'
  - mysql --user="root" --password="" acota < acota.mysql.sql
  - mysql --user="root" --password="" -e "CREATE USER acota IDENTIFIED BY 'acota';"
  - mysql --user="root" --password="" --database="acota" -e "GRANT ALL PRIVILEGES ON acota TO 'acota'@'%' WITH GRANT OPTION;"
  - mysql --user="root" --password="" --database="acota" -e "GRANT ALL PRIVILEGES ON acota TO 'acota'@localhost WITH GRANT OPTION;"
  - psql -c "CREATE DATABASE acota;" -U postes
  - psql -U postgres -d acota -a -f acota.postgresql.sql
  - psql -c "CREATE USER acota WITH PASSWORD 'acota';" -U postgres
  - psql -c "GRANT ALL PRIVILEGES ON DATABASE acota to acota;" -U postes
  - 'wget 156.35.82.101:7000/downloads/acota/utils/travis/maven/addServer.py'

env:
  global:
    - SONATYPE_USERNAME=cesarla
    - secure: "Ii8/eg7l8XE+XbrZj1WLBUOpMUVhlMDpV9wz+ptrAV7RSTzbFubi1Kgnsycv\nLtCzSlthugommBLF6EqsvXR4+LzdUm8kXV9T1SFumXPO7M7hlZFExse1PDq3\nawXfXZHfYjy7KBRxhoQyPgmXEvQUwQa1oab+AsuRoB5brBbSgAE="

after_success:
  - python addServer.py
  - mvn clean deploy --settings ~/.m2/mySettings.xml

notifications:
  email:
    - sisa989@gmail.comgr
